<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<style type="text/css">
    .issue {background-color: yellow}
    .postponedissue {background-color: yellow}
    .def code
    .future {background-color: pink}
    .draftedit {background-color: white}
    .draftdelete {background-color: white}
    .note { margin-left: 4em }
    code { font-weight: bold;
           font-family: monospace } 

div.exampleInner pre { margin-left: 1em;
                       margin-top: 0em; margin-bottom: 0em}
div.exampleOuter {border: 4px double gray;
                  margin: 0em; padding: 0em}
div.exampleInner { border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: white;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: white;
                   padding: 0px; margin: 0em }
div.exampleWrapper { margin: 4px }
div.exampleHeader { font-weight: bold;
                    margin: 4px}

div.schemaInner pre { margin-left: 1em;
                      margin-top: 0em; margin-bottom: 0em;
                       }
div.schemaOuter {border: 4px double gray; padding: 0em}
div.schemaInner { background-color: #eeeeee;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px; margin: 0em }
div.schemaHeader { font-weight: bold;
                    margin: 4px}
</style>
	<title>IVOA Proposed Recommendation - IVOA Support Interfaces</title>
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
	<meta name="keywords" content="IVOA, International, Virtual, Observatory, Alliance" />
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	<meta name="maintainedBy" content="IVOA Document Coordinator, ivoadoc@ivoa.net" />
	<link rel="stylesheet" href="http://ivoa.net/misc/ivoa_pr.css" type="text/css" />
</head>

<body>
<div class="head">
<a href="http://www.ivoa.net/"><img alt="IVOA" src="http://www.ivoa.net/pub/images/IVOA_wb_300.jpg" width="300" height="169"/></a>
<h1>IVOA Support Interfaces<br/>
Version 1.00-20101213</h1>
<h2>IVOA WG Proposed Recommendation 2010 December 13 </h2>

<dl>
  <dt>This version:</dt>
  <dd><a href="http://www.ivoa.net/Documents/VOSI/20101213/">
      http://www.ivoa.net/Documents/VOSI/20101213/</a></dd>

  <dt>Latest version:</dt>
  <dd><a href="http://www.ivoa.net/Documents/latest/VOSI.html">
      http://www.ivoa.net/Documents/latest/VOSI.html</a></dd>

  <dt>Previous versions:</dt>
  <dd>PR: <a href="http://www.ivoa.net/Documents/VOSI/20100311/">
    http://www.ivoa.net/Documents/VOSI/20100311/</a> <br />
      WD: <a href="http://www.ivoa.net/Documents/VOSI/20090825/">
      http://www.ivoa.net/Documents/VOSI/20090825/</a> <br />
      WD: <a href="http://www.ivoa.net/Documents/VOSI/20081030/">
      http://www.ivoa.net/Documents/VOSI/20081030/</a></dd>
</dl>

<dl>
	<dt>Working Group:</dt>
		<dd><a
  href="http://www.ivoa.net/twiki/bin/view/IVOA/IvoaGridAndWebServices">
  http://www.ivoa.net/twiki/bin/view/IVOA/IvoaGridAndWebServices</a></dd>

  <dt>Editors:</dt>
  <dd><a
  href="http://www.ivoa.net/twiki/bin/view/IVOA/MatthewGraham">Matthew
  Graham</a><br/>
    <a
  href="http://www.ivoa.net/twiki/bin/view/IVOA/GuyRixon">Guy Rixon</a></dd>
	<dt>Author(s):</dt>
		<dd>
			<a
  href="http://www.ivoa.net/twiki/bin/view/IVOA/IvoaGridAndWebServices">Grid and Web
  Services Working Group</a><br/>
			<a href="http://www.ivoa.net/twiki/bin/view/IVOA/"></a>
		</dd>
</dl>
<hr/></div>

<h2><a name="abstract" id="abstract">Abstract</a></h2>

<p>
This document describes the minimum interface that a (SOAP- or REST-based) web service requires to participate in the IVOA. 
</p>

<div class="status">
<h2><a name="status" id="status">Status of this Document</a></h2>

<!-- Choose one of the following (and remove the rest)-->
<!--Note-->
<!--
<p>This is an IVOA Note expressing suggestions from and opinions of the authors.<br/>
It is intended to share best practices, possible approaches, or other perspectives on interoperability with the Virtual Observatory.
It should not be referenced or otherwise interpreted as a standard specification.</p>
<p>This is an IVOA Working Draft for review by IVOA members and other interested parties.<br/>
It is a draft document and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use IVOA Working Drafts as reference materials -->
  <!--or to cite them as other than "work in progress.</p>
  -->
<!--Proposed Recommendation-->
<p>This is an IVOA Proposed Recommendation made available for public review.<br/>
It is appropriate to reference this document only as a recommended standard that is under review and which may be changed
before it is accepted as a full recommendation.<br/>
The first release of this document was 2010 March 11 .
</p>
<!--Recommendation
<p>This document has been produced by the IVOA "WG Name"  Working Group.<br/>
It has been reviewed by IVOA Members and other interested parties, and has been endorsed by the IVOA Executive Committee as an IVOA Recommendation.
It is a stable document and may be used as reference material or cited as a normative reference from another document. IVOA's role in making the Recommendation is to draw attention to the specification and to promote its widespread deployment.
This enhances the functionality and interoperability inside the Astronomical Community.</p>
-->

A list of <a href="http://www.ivoa.net/Documents/">current IVOA Recommendations and other technical documents</a> can be found at http://www.ivoa.net/Documents/.

</div><br />

<h2><a name="acknowledgments" id="acknowledgments">Acknowledgments</a></h2>
<p>This document has been developed with support from the
<a href="http://www.nsf.gov/">National Science Foundation's</a>
Information Technology Research Program under Cooperative Agreement
AST0122449 with The Johns Hopkins University, from the
<a href="http://www.pparc.ac.uk/">UK Particle Physics and Astronomy
Research Council (PPARC)</a>, from the European Commission's (EC)
<a href="http://cordis.europa.eu/fp6/">Sixth
Framework Programme</a> via the <a href="http://www.astro-opticon.org/">
Optical Infrared Coordination Network (OPTICON)</a>, and from EC's
<a href="http://cordis.europa.eu/fp7/">Seventh Framework Programme</a>
via its
<a href="http://cordis.europa.eu/fp7/ict/e-infrastructure/home_en.html">
eInfrastructure Science Repositories initiative</a>.  </p>

<p>This work is based on discussions and actions from the 2003 IVOA
meeting in Strasbourg and further discussions on registry
functionality at JHU late in 2003. Later inputs came from a local
meeting at JHU in Sept. 2004. William O'Mullane and Ani Thakar were the editors and primary authors for these early versions.</p>
<p>
The decision to split the interfaces into a mandatory set and optional logging interfaces was taken by GWS-WG at the IVOA meeting of May 2006.
</p>

<h2><a name="conformance" id="conformance">Conformance related definitions</a></h2>
<p>The words "MUST", "SHALL", "SHOULD", "MAY", "RECOMMENDED", and "OPTIONAL" (in upper or lower case) used in this document are to be interpreted as described in IETF standard, RFC 2119 [RFC 2119].</p><p>
The <strong>Virtual Observatory (VO)</strong> is a general term for a
collection of federated resources that can be used to conduct
astronomical research, education, and outreach. The <strong>International Virtual Observatory Alliance (IVOA)</strong> is a global collaboration of separately funded projects to develop standards and infrastructure that enable VO applications. The International Virtual Observatory (IVO) application is an application that takes advantage of IVOA standards and infrastructure to provide some VO service.
</p>

<h2><a id="contents" name="contents">Contents</a></h2>
<div class="head">
<ul class="toc">
<li><a href="#abstract">Abstract</a></li>
<li><a href="#status">Status</a></li>
<li><a href="#acknowledgments">Acknowledgments</a></li>
<li><a href="#contents">Contents</a></li>
<li><a href="#sec1">1. Introduction</a></li>
<ul class="toc"><li><a href="#sec1_1">1.1 The role in the IVOA Architecture</a></li></ul>
<li><a href="#sec2">2. Interfaces bindings</a></li>
<li><a href="#sec3">3. Metadata specification</a>
	<ul class="toc">
	<li><a href="#sec3_1">3.1 Capability metadata</a></li>
	<li><a href="#sec3_2">3.2 Non-service metadata (non-normative)</a></li>
	<li><a href="#sec3_3">3.3 Availability metadata</a></li>
	<li><a href="#sec3_4">3.4 Table metadata</a></li>
	</ul></li>
<li><a href="#sec4">4. Registration of VOSI endpoints</a></li>
<li><a href="#sec5">5. Example VOSI responses</a></li>
<br/>
<li><a href="#appA">Appendix A: VOSI XML schemas</a></li>
<li><a href="#appB">Appendix B: Changes from previous versions</a></li>
<li><a href="#ref">References</a></li>
</ul>
</div>
<hr/>


<br/>
<h2><a name="sec1">1. Introduction</a></h2>
<p>The web services that comprise much of the Virtual Observatory (VO)
come in two forms: SOAP-based (Simple Object Access Protocol, [1])
ones such as footprint and spectrum services [2], SkyNodes and Open
SkyQuery [3], registry interfaces [4] and CDS access [5]; and RESTful
(REpresentational State Transfer, [6]) ones such as TAP [7] and other
second generation data access (DAL) services, and VOSpace 2.0
[8]. This document describes a set of common basic functions that all
these services should provide in the form of a standard support interface
in order to support the effective management of the VO.
</p>
<p>
The IVOA Web Services Basic Profile [9] mandates that a compliant
SOAP-based web service should have the interface defined in this
specification, as expressed using the standard WSDL (Web Services
Description Language, [10]) format. For RESTful services, the
requirement for the support interface is stated in the specification for each kind of service. A contract for a RESTful service may specify extra constraints (e.g., on the form of the URIs) for the support interface. </p>


<h3><a name="sec1_2">1.2 The role in the IVOA Architecture</a></h3>
<p>The IVOA Architecture [11] provides a high-level view of how IVOA
standards work together to connect users and applications with
providers of data and services, as depicted in the diagram in Fig. 1.
</p>

<p>
<center>
<font size="-1">
<img src="vosi-in-arch.png" width="756"/> <br />
<blockquote>
<strong>Figure 1. VOSI in the IVOA Architecture.</strong>
VOSI is the standard that defines the basic functions that all VO
services should provide in order to support management of the VO.
</blockquote>
</font>
</center>
</p>

<p>In this architecture, users employ a variety of tools (from the
User Layer) to discover and access archives and services--that is,
resources--of interest (represented in the Resource Layer).  A
registry plays a role in discovery by harvesting metadata that
describe archives and services and making them searchable from a
central service.  The VOSI interface provides a means for a service to
provide some of this metadata itself; this allows a registry to pull
the metadata from the service rather than relying on a human to
provide it (e.g. by typing the data into a registration form
manually).  This mechanism can aake it easier to collect highly
detailed metadata (e.g. descriptions of columns in a catalog) that
might not be practically provided otherwise.  As some of this metadata
describes the service interface and how it behaves, other applications
can use this information for controlling how they use the service.
Even when the service is "discovered" through some means other than a
registry, an application can still understand how to use the service
by querying for this information directly.  
<p>

<p>
Once a user discovers data and services of interest, she will want to
use engage them in an analysis process.  Success requires that the selected
services are actually up and running properly as a down service can
cause auotmated processing to fail completely.  Registry and workflow
services can assist with this by tracking the availability of
services and alerting users about downtime.  We envision that VOSI
will allow VO projects to better track the overall health of the VO
ecosystem.
</p>

<h2><a name="sec2">2. Interface bindings</a></h2>
<p>The standard interface returns metadata without changing the
state of the service with which it is associated. This could, in principle, be
implemented in any of three ways:</p>
<ol type="1">
<li> As extra SOAP operations on an existing SOAP endpoint of the
  service with which it is associated. This would be a 'SOAP binding' of VOSI.
<li> As SOAP operations on a separate SOAP endpoint. This would be an alternate form of the SOAP binding.
<li> As web resources with distinct URLs, without using the SOAP protocol. This is the 'REST binding' for the standard interface. 
</ol><p>
This standard requires the REST binding of VOSI even when applied to
services that otherwise use SOAP. No details of the SOAP binding are
given in this version of the standard. </p>
<p>
In the REST binding, the support interfaces shall have distinct URLs
in the HTTP scheme and shall be accessible by the GET operation in the
HTTP protocol. The response to an HTTP POST, PUT or DELETE to these
resources is not defined by this specification. However, if an
implementation has no special action to perform for these requests,
the normal response would be a HTTP 405 "Method not allowed" status code. </p><p>
The endpoints and interface types for the support interface shall be
defined in the service's registration using one <i>Capability</i> element for
each interface. The values of the <i>standardID</i> attribute for these <i>Capability</i>s are given in section 4.</p><p>
When using the REST binding, any HTTP URLs may be used. The client
must find the appropriate URLs from the service's entry in the VO registry and, in general, should not try and infer the URLs from any other URLs for that service. However, standards for specific services may put extra constraints on the form of the URLs.</p>
</p>


<h2><a name="sec3">3. Metadata specification</a></h2>
<p>
There are various classes of metadata that might be returned by a
service through its standard interface:</p>
<ul>
<li> those describing its functional capabilities
<li> those describing its operational behaviour - availability,
  reliability, etc.
<li> those describing tabular data handled by the service
<li> those describing other aspects of the service
</ul>
<p>This section defines how each of these classes is represented. The
following typographic convention is used to represent a XML element defined
within a particular namespace:</p>
<pre>
{http://some.name.space}elementName
</pre>
<p>For example,
<i>{http://www.ivoa.net/xml/VOResource/v1.0}resource</i> indicates a
XML element named <i>resource</i> that is described in the XML schema
associated with the 'http://www.ivoa.net/xml/VOResource/v1.0'
namespace - in this case, this would be VOResource.xsd [12].
</p>

<h3><a name="sec3_1">3.1 Capability metadata</a></h3>

<p></p
<blockquote>
<table bgcolor="#dddddd" border="2" cellpadding="5"><tbody><tr><td>
<dl style="margin-top: 0pt; margin-bottom: 0pt">
  <dt> <strong>Note:</strong> </dt>
  <dd>'Capability' is unfortunately an overloaded term in the VO
    referring to both a functional aspect of a service
    and also particular pieces of metadata defined by various XML
    schema. When referring to an XML element called 'capability', it
    shall be be put in italics. Its parent namespace may also be
    included (using the syntax described above) if it is ambiguous
    which XML schema is being referred to.
  </dd>
</dl>
</td></tr></tbody></table>
</blockquote>
<p></p>

<p>This interface provides the service metadata in the form of a list
of <i>Capability</i> descriptions. Each of these descriptions is an XML element that: </p>
<ul>
  <li> states that the service provides a particular, IVOA-standard function;
  <li> lists the interfaces for invoking that function;
 <li> records any details of the implementation of the function that
  are not defined as default or constant in the standard for that function.
  </ul>
  <p>
For example, one capability might describe a cone search function and
  another the TAP implementation but these two might well apply to the same service.</p><p>
An entry for a service in the resource registry - i.e., its VOResource
  - contains the Dublin Core resource metadata (identifier, curation
  information, content description, etc.) followed by the service's
  capability descriptions (expressed as a series of
  <i>{http://www.ivoa.net/xml/VOResource/v1.0}Capability</i> elements). Effectively, the resource metadata describes the service to human users and the capability list describes it to software. Therefore, the latter list has two uses:</p>
<ul><li>it may be read by a client application to find out how to invoke the service. This presumes that the service has been already been selected and the VOSI endpoint located.
<li>it may be read by the registry itself to compile the registry entry for the service. In this case, the resource metadata are entered into the registry directly and the service metadata are then read from the service. Since the service implementation usually knows its capabilities, this removes the need for a human to type them into the registry.
</ul></p>

<p>
The service metadata shall be represented as an XML document with the
root element
<i>{http://www.ivoa.net/xml/VOSICapabilities/v1.0}capabilities</i>.
(See <a href="#appA1">Appendix A.1</a> for the definition of the
VOSICapabilities XML schema.)  This element must contain one or more child
<i>capability</i> elements that describe the capabilities of the
service.  Given that the <i>capability</i> element is defined to be of type
<i>{http://www.ivoa.net/xml/VOResource/v1.0}Capability</i>, a <i>capability</i>
element may be represented by a legal sub-type of
<i>{http://www.ivoa.net/xml/VOResource/v1.0}Capability</i>, in which
case, the <i>capability</i> element must use an <i>xsi:type</i>
attribute to identify the sub-type (see section 2.2.1 of
[<a href="#ref:vor">1</a>]). 
</p>

<p></p
<blockquote>
<table bgcolor="#dddddd" border="2" cellpadding="5"><tbody><tr><td>
<dl style="margin-top: 0pt; margin-bottom: 0pt">
  <dt> <strong>Note:</strong> </dt>
  <dd> The value of the <i>capability</i> element's standardID attribute is used
   to indicate the service's support for particular standard protocols
   (such as Simple Image Access, Simple Cone Search, etc.).  In the
   case of some protocols, the support for the standard is further
   characterized by additional metadata provided by a standard XML
    schema extension of <i>Capability</i> for that protocol. The extension metadata is enabled by
   adding a <i>xsi:type</i> attribute to the <i>capability</i> element set to the
   <i>Capability</i> sub-type value defined in the extension schema for that protocol (see the examples in <a href="#sec5">section 5</a> below).  </dd>
</dl>
</td></tr></tbody></table>
</blockquote>
<p></p>

<p>
The VOResource list of capabilities should include capabilities describing VOSI
endpoints as specified in <a href="#sec4">section 4</a>.
</p>


<p>
In the REST binding, the service metadata shall be a single web
resource with a registered URL. The date and time at which the
metadata last changed shall be obtained from the <i>Last-Modified</i>
HTTP Header keyword sent in the response to a GET or HEAD request to the registered URI.</p><p>
All VO services should provide this interface.
</p>

<h3><a name="sec3_2">3.2 Non-service metadata (non-normative)</a></h3>
<p>There may be other metadata associated with a service than the capability metadata described above.
<ul><li> Every service has the Dublin Core resource metadata [13].
<li> Some services are associated with registered applications.
<li> Some services are associated with registered data collections.
</ul></p><p>None of these are explicitly provided for in this version of VOSI. Some might be covered in later versions of VOSI.
</p>

<h3><a name="sec3_3">3.3 Availability metadata</a></h3>
<p>This interface indicates whether the service is operable and the reliability of the service for extended and scheduled requests. 
The availability shall be represented as an XML document in which the
root element is <i>{http://www.ivoa.net/xml/Availability/v1.0}availability</i>. This element
shall contain child elements providing the following information.</p>
<ul>
<li> <i>available</i> - whether the service is currently accepting requests
<li> <i>upSince</i> - duration for which the service has been continuously available
<li> <i>downAt</i> - the instant at which the service is next scheduled to be unavailable
<li> <i>backAt</i> - the instant at which the service is scheduled to become available again after down time;
<li> <i>note</i> - textual note, e.g. explaining the reason for unavailaility.
</ul><p>
  The elements <i>upSince</i>, <i>downAt</i>, <i>backAt</i> and <i>note</i> are optional. The <i>available</i> element is mandatory. There may be more than one <i>note</i> element.</p><p>
The XML document shall conform to the schema given in appendix A.2 of this specification.</p><p>
When reporting availability, the service should do a good check on its underlying parts to see if it is still operational and not just make a simple return from a web server, e.g., if it relies on a database it should check that the database is still up. If any of these checks fail, the service should set <i>available</i> to false in the availability output.</p><p>
If a service is to be online but unavailable for work (e.g., when a service with a work queue intends to shut down after draining the queue) then the service should set <i>available</i> to false.</p><p>
There are no special elements in the availability document for the
contact details of the service operator. These details may be given as
a <i>note</i> element if they are known to the service.</p>
<p>
In the REST binding, the availability shall be a single web resource with a registered URL</p><p> 
All VO services shall provide this interface.
</p>

<h3><a name="sec3_4">3.4 Table metadata</a></h3>
<p>
Some services deal with tabular data. These data may be the target of
ADQL queries, as in TAP [14], or they may be the output of other operations, as in SIAP queries. In each case, it is useful if the service describes the details of the tables concerned. It is more useful if this description can be captured in the resource registry.</p><p>
The <i>VODataService</i> standard [<a href="#ref:vos">2</a>] defines XML elements for describing a set of tables. These elements can be included in a resource document for a service.</p><p>
A service which uses tables in its interface should define a VOSI
endpoint from which table metadata can be read. The table metadata
shall be represented as an XML document  of which the root element is
of type
<i>{http://www.ivoa.net/xml/VODataService/v1.1}TableSet</i>. This
element may contain any mix of elements allowed by the VODataService
XML schema.</p><p>
In the REST binding, the table metadata shall be a single web resource with a registered URL.
</p>

<h2><a name="sec4">4. Registration of VOSI endpoints</a></h2>
<p>
The endpoints for the service and availability metadata shall be
included in the registration of each service that provides them.
</p>
<center>
<table>
  <tr><th align="left">Endpoint type</th><th align="left">standardID value</th></tr>
  <tr><td>availability</td><td>ivo://ivoa.net/std/VOSI#availability</td></tr>
  <tr><td>capabilties</td><td>ivo://ivoa.net/std/VOSI#capabilities</td></tr>
  <tr><td>tables</td><td>ivo://ivoa.net/std/VOSI#tables</td></tr>
  </table>
  </center>
<p>
An availability endpoint shall be represented by an element named
<i>capability</i>, of type
<i>{http://www.ivoa.net/xml/VOResource/v1.0}Capability</i> (defined by
the standard VOResource XML schema [<a href="ref:vor">1</a>]). The
value of the <i>standardID</i> attribute of the <i>capability</i>
shall be <i>ivo://ivoa.net/std/VOSI#availability</i>.
</p>

<p>
A capabilities endpoint should be represented by  an element named
  <i>capability</i>, of type
  <i>{http://www.ivoa.net/xml/VOResource/v1.0}Capability</i>. If such
  a <i>capability</i> is provided then the value of the <i>standardID</i> attribute must be <i>ivo://ivoa.net/std/VOSI#capabilities.</i></p><p>
A tables endpoint should be represented by an element named
  <i>capability</i>, of type
  <i>{http://www.ivoa.net/xml/VOResource/v1.0}Capability</i>. If such
  a <i>capability</i> is provided then the value of the <i>standardID</i> attribute must be <i>ivo://ivoa.net/std/VOSI#tables</i>.
</p>

<p>
With all three VOSI functions, the capability element that describes
the function must contain an interface element of a type semantically
appropriate for the binding of the function to the service; the
<i>accessURL</i> element within the interface element indicates the
endpoint for the VOSI function.  For the REST binding, this
<i>accessURL</i> element must set the <i>use</i> attribute to "full".
Furthermore, for the REST binding, this document recommends using the
<i>{http://www.ivoa.net/xml/VODataService/v1.1}ParamHTTP</i> interface
type to encode VOSI endpoints (see examples given in
<a href="#sec5">section 5</a>). 
</p>


<h2><a name="sec5">5. Example VOSI responses</a></h2>

<!-- Space to push page break in PDF version
<br />
<br />
 -->

<div class="exampleOuter">
<a name="ex:caps">
</a><div class="exampleHeader">Example 1:</div>
<div class="exampleWrapper">A sample response from a capabilities
resource describing an SIA service.  </div>
<div class="exampleInner" style="background-color: rgb(213, 222, 227);">
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vosi:capabilities xmlns:vosi="http://www.ivoa.net/xml/VOSICapabilities/v1.0"
                      xmlns:vr="http://www.ivoa.net/xml/VOResource/v1.0"
                      xmlns:vs="http://www.ivoa.net/xml/VODataService/v1.0"
                      xmlns:sia="http://www.ivoa.net/xml/SIA/v1.0"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xsi:schemaLocation="http://www.ivoa.net/xml/VOSI/v1.0
                                          http://www.ivoa.net/xml/VOSI/v1.0
                                          http://www.ivoa.net/xml/VOResource/v1.0
                                          http://www.ivoa.net/xml/VOResource/v1.0
                                          http://www.ivoa.net/xml/VODataService/v1.0
                                          http://www.ivoa.net/xml/VODataService/v1.0
                                          http://www.ivoa.net/xml/SIA/v1.0
                                          http://www.ivoa.net/xml/SIA/v1.0"&gt;

  &lt;!-- a generic capability (for custom, non-standard interfaces) --&gt;
  &lt;capability&gt;
    &lt;interface xsi:type="vr:WebBrowser"&gt;
      &lt;accessURL use="full"&gt; http://adil.ncsa.uiuc.edu/siaform.html &lt;/accessURL&gt;
    &lt;/interface&gt;
  &lt;/capability&gt;
  
  &lt;!-- the SIA capability --&gt;
  &lt;capability xsi:type="sia:SimpleImageAccess" standardID="ivo://ivoa.net/std/SIA"&gt;
    &lt;interface xsi:type="vs:ParamHTTP" role="std"&gt;
      &lt;accessURL&gt; http://adil.ncsa.uiuc.edu/cgi-bin/voimquery?survey=f&amp;amp; &lt;/accessURL&gt;
    &lt;/interface&gt;

    &lt;imageServiceType&gt;Pointed&lt;/imageServiceType&gt;
    &lt;maxQueryRegionSize&gt;
      &lt;long&gt;360.0&lt;/long&gt;
      &lt;lat&gt;180.0&lt;/lat&gt;
    &lt;/maxQueryRegionSize&gt;
    &lt;maxImageExtent&gt;
      &lt;long&gt;360.0&lt;/long&gt;
      &lt;lat&gt;180.0&lt;/lat&gt;
    &lt;/maxImageExtent&gt;
    &lt;maxImageSize&gt;
      &lt;long&gt;5000&lt;/long&gt;
      &lt;lat&gt;5000&lt;/lat&gt;
    &lt;/maxImageSize&gt;
    &lt;maxFileSize&gt;100000000&lt;/maxFileSize&gt;
    &lt;maxRecords&gt;5000&lt;/maxRecords&gt;
  &lt;/capability&gt;

  &lt;!-- the interface that returns this document --&gt;
  &lt;capability standardID="ivo://ivoa.net/std/VOSI#capabilities"&gt;
    &lt;interface xsi:type="vs:ParamHTTP" role="std"&gt;
      &lt;accessURL use="full"&gt; http://adil.ncsa.uiuc.edu/cgi-bin/voimquery/capabilities &lt;/accessURL&gt;
    &lt;/interface&gt;
  &lt;/capability&gt;

  &lt;!-- the interface that returns this document --&gt;
  &lt;capability standardID="ivo://ivoa.net/std/VOSI#availability"&gt;
    &lt;interface xsi:type="vs:ParamHTTP" role="std"&gt;
      &lt;accessURL use="full"&gt; http://adil.ncsa.uiuc.edu/cgi-bin/voimquery/availability &lt;/accessURL&gt;
    &lt;/interface&gt;
  &lt;/capability&gt;
&lt;/vosi:capabilities&gt;
</pre>
</div></div>
<br/>
<div class="exampleOuter">
<a name="ex:caps">
</a><div class="exampleHeader">Example 2:</div>
<div class="exampleWrapper">A sample response from a tables
resource describing a TAP service.  </div>
<div class="exampleInner" style="background-color: rgb(213, 222, 227);">
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;vosi:tableset
  xmlns:vosi="http://www.ivoa.net/xml/VOSITables/v1.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:vod="http://www.ivoa.net/xml/VODataService/v1.1">
  &lt;schema>
    &lt;name>cfht &lt;/name>
    &lt;table type="output">
      &lt;name>cfht.deepU &lt;/name>
      &lt;column>
        &lt;name>cfhtlsID &lt;/name>
        &lt;dataType xsi:type="vod:TAP" size="30">adql:VARCHAR &lt;/dataType>
      &lt;/column>
      &lt;column>
        &lt;name>survey &lt;/name>
        &lt;dataType xsi:type="vod:TAP" size="6">adql:VARCHAR &lt;/dataType>
      &lt;/column>
      &lt;column>
        &lt;name>field &lt;/name>
        &lt;dataType xsi:type="vod:TAP" size="2">adql:VARCHAR &lt;/dataType>
      &lt;/column>
      &lt;column>
        &lt;name>pointing &lt;/name>
        &lt;dataType xsi:type="vod:TAP" size="6">adql:VARCHAR &lt;/dataType>
      &lt;/column>
      &lt;column>
        &lt;name>selectionFilter &lt;/name>
        &lt;dataType xsi:type="vod:TAP" size="2">adql:VARCHAR &lt;/dataType>
      &lt;/column>
    &lt;/table>
    &lt;table type="output">
      &lt;name>TAP_SCHEMA.keys &lt;/name>
      &lt;column>
        &lt;name>key_id &lt;/name>
        &lt;description>unique key to join to TAP_SCHEMA.key_columns &lt;/description>
        &lt;dataType xsi:type="vod:TAP" size="64">adql:VARCHAR &lt;/dataType>
      &lt;/column>
      &lt;column>
        &lt;name>from_table &lt;/name>
        &lt;description>the table with the foreign key &lt;/description>
        &lt;dataType xsi:type="vod:TAP" size="64">adql:VARCHAR &lt;/dataType>
      &lt;/column>
      &lt;column>
        &lt;name>target_table &lt;/name>
        &lt;description>the table with the primary key &lt;/description>
        &lt;dataType xsi:type="vod:TAP" size="64">adql:VARCHAR &lt;/dataType>
      &lt;/column>
    &lt;/table>
  &lt;/schema>
&lt;/vosi:tableset>
</pre>
</div></div>


<br/>
<h2><a name="appA">Appendix A: VOSI XML schemas</a></h2>

<a name="appA1">
<h3>A.1.  The Complete VOSICapabilities Schema</h3></a>

<pre>&lt;xsd:schema targetNamespace="http://www.ivoa.net/xml/VOSICapabilities/v1.0"
            xmlns:tns="http://www.ivoa.net/xml/VOSICapabilities/v1.0"
            xmlns:vr="http://www.ivoa.net/xml/VOResource/v1.0"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            elementFormDefault="qualified"
            attributeFormDefault="unqualified"
            version="1.0rc1"&gt;

  &lt;xsd:annotation&gt;
     &lt;xsd:documentation&gt;
       A schema for formatting service capabilities as returned by a 
       capabilities resource, defined by the IVOA Support Interfaces 
       specification (VOSI). 
       See http://www.ivoa.net/Documents/latest/VOSI.html.  
     &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;

  &lt;xsd:import namespace="http://www.ivoa.net/xml/VOResource/v1.0"
              schemaLocation="http://www.ivoa.net/xml/VOResource/v1.0" /&gt;

  &lt;!--
    -  the root element for a VOSI capabilities metadata (section 3.1)
    --&gt;
  &lt;xsd:element name="capabilities"&gt;
     &lt;xsd:annotation&gt;
       &lt;xsd:documentation&gt;
         A listing of capabilities supported by a service
       &lt;/xsd:documentation&gt;
     &lt;/xsd:annotation&gt;

     &lt;xsd:complexType&gt;
        &lt;xsd:sequence&gt;

           &lt;xsd:element name="capability" type="vr:Capability" 
                        form="unqualified" minOccurs="0" maxOccurs="unbounded"&gt;
              &lt;xsd:annotation&gt;
                &lt;xsd:documentation&gt;
                  A capability supported by the service.  
                &lt;/xsd:documentation&gt;
                &lt;xsd:documentation&gt;
                  A protocol-specific capability is included by specifying a
                  vr:Capability sub-type via an xsi:type attribute on this 
                  element.
                &lt;/xsd:documentation&gt;
              &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;

      &lt;/xsd:sequence&gt;
    &lt;/xsd:complexType&gt;
  &lt;/xsd:element&gt;

&lt;/xsd:schema&gt;
</pre>

<a name="appA2">
<h3>A.2.  The Complete VOSIAvailability Schema</h3></a>

<pre>&lt;xsd:schema targetNamespace="http://www.ivoa.net/xml/VOSIAvailability/v1.0"
            xmlns:tns="http://www.ivoa.net/xml/VOSIAvailability/v1.0"
            xmlns:vr="http://www.ivoa.net/xml/VOResource/v1.0"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            elementFormDefault="qualified"
            attributeFormDefault="unqualified"
            version="1.0rc1"&gt;

  &lt;xsd:annotation&gt;
     &lt;xsd:documentation&gt;
       A schema for formatting availability metadata as returned by an
       availability resource defined in the IVOA Support Interfaces 
       specification (VOSI). 
       See http://www.ivoa.net/Documents/latest/VOSI.html.  
     &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;

  &lt;!--
    -  the root element for a VOSI availability (section 3.3)
    --&gt;
  &lt;xsd:element name="availability" type="tns:Availability"/&gt;

  &lt;xsd:complexType name="Availability"&gt;
    &lt;xsd:sequence&gt;
      
      &lt;xsd:element name="available" type="xsd:boolean"&gt;
        &lt;xsd:annotation&gt;
          &lt;xsd:documentation&gt;
             Indicates whether the service is currently available.
           &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
      &lt;/xsd:element&gt;

      &lt;xsd:element name="upSince" type="xsd:dateTime" minOccurs="0"&gt;
        &lt;xsd:annotation&gt;
          &lt;xsd:documentation&gt;
            The instant at which the service last became available.
          &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
      &lt;/xsd:element&gt;

      &lt;xsd:element name="downAt" type="xsd:dateTime" minOccurs="0"&gt;
        &lt;xsd:annotation&gt;
          &lt;xsd:documentation&gt;
            The instant at which the service is next scheduled to become
            unavailable.
          &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
      &lt;/xsd:element&gt;

      &lt;xsd:element name="backAt" type="xsd:dateTime" minOccurs="0"&gt;
        &lt;xsd:annotation&gt;
          &lt;xsd:documentation&gt;
            The instant at which the service is scheduled to become available 
            again after a period of unavailability.
          &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
      &lt;/xsd:element&gt;

      &lt;xsd:element name="note" type="xsd:string" 
                   minOccurs="0" maxOccurs="unbounded"&gt;
        &lt;xsd:annotation&gt;
          &lt;xsd:documentation&gt;
            A textual note concerning availability.
          &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
      &lt;/xsd:element&gt;

    &lt;/xsd:sequence&gt;
  &lt;/xsd:complexType&gt;

&lt;/xsd:schema&gt;
</pre>

<a name="appA3">
<h3>A.3.  The Complete VOSITables Schema</h3></a>

<pre>
&lt;xsd:schema targetNamespace="http://www.ivoa.net/xml/VOSICapabilities/v1.0"
            xmlns:tns="http://www.ivoa.net/xml/VOSICapabilities/v1.0"
            xmlns:vr="http://www.ivoa.net/xml/VOResource/v1.0"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            elementFormDefault="qualified"
            attributeFormDefault="unqualified"
            version="1.0rc1"&gt;

  &lt;xsd:annotation&gt;
     &lt;xsd:documentation&gt;
       A schema for formatting table metadata as returned by a 
       tables resource, defined by the IVOA Support Interfaces 
       specification (VOSI). 
       See http://www.ivoa.net/Documents/latest/VOSI.html.  
     &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;

  &lt;xsd:import namespace="http://www.ivoa.net/xml/VODataService/v1.1"
              schemaLocation="http://www.ivoa.net/xml/VODataService/v1.1" /&gt;

  &lt;!--
    -  the root element for a VOSI table metadata (section 3.4)
    --&gt;
  &lt;xsd:element name="tableset" type="vs:TableSet" &gt;
     &lt;xsd:annotation&gt;
       &lt;xsd:documentation&gt;
         A description of the table metadata supported by the 
         service associated with a VOSI-enabled resource.
       &lt;/xsd:documentation&gt;
     &lt;/xsd:annotation&gt;
  &lt;/xsd:element&gt;

&lt;/xsd:schema&gt;
</pre>

<h2><a name="appB">Applendix B: Changes from previous versions</a></h2>

<h4>Changes since PR-20100311</h4>
<ul>
  <li>Inclusion of IVOA Architecture text </li>
  <li>Restructuring and clarification in response to RFC comments</li>
  <li>Inclusion of VOSITables schema in appendix</li>
  <li>Second example added for a TAP service response</li>
  </ul>

<h4>Changes since WD-20090825</h4>

<ul>
  <li> Mandate the use of VOSICapabilities to return capabilities </li>
  <li> S2.1: added non-normative note about capability sub-types;  added
       example capabilities metadata </li>
  <li> Recommend the inclusion of VOSI interfaces in capability metadata</li>
  <li> S2.5:  When returning capabilities metadata, require VOSI (REST) 
       accessURLs to have use="full"; recommend this use of ParamHTTP. </li>
  <li> Rename Availability schema to VOSIAvailability; added
       VOSICapabilities schema. </li>
</ul>

<h4>Changes since WD-20081030</h4>

<p>The REST binding is made mandatory for all kinds of service. Details of the SOAP binding, including its WSDL contract, are removed.</p><p>
The definition of the root element for the table-metadata document is corrected. Instead of requiring the <i>tableset</i> element from <i>VODataService 1.1</i> (which element does not exist in that schema), the text now requires an element of type <i>TableSet</i>.
</p>

<br/>
<h2><a name="ref">References</a></h2>

<dl>
  <dt> <a name="ref:vor">[1]</a> </dt>
  <dd> Plante, R., Benson, K., Graham, M., Greene,
       G., Harrison, P., Lemson, G., Linde, T., Rixon,
       G., St&eacute;b&eacute;, A. 2008, <cite>
       <a href="http://www.ivoa.net/Documents/cover/VOResource-20080222.html">
       VOResource: an XML Encoding Schema for Resource Metadata</a></cite>,
       v1.03, IVOA Recommendation,
       <code>http://www.ivoa.net/Documents/cover/VOResource-20080222.html</code>
       </dd>

  <dt> <a name="ref:vos">[2]</a> </dt>
  <dd> Plante, R., St&eacute;b&eacute;, A., Benson, K., Dowler, P.,
       Graham, M., Greene, G., Harrison, P., Lemson, G., Linde, T., 
       Rixon, G. 2008, <cite>
       <a href="http://www.ivoa.net/Documents/VODataService/20090903/">
       VODataService: a VOResource Schema Extension for Describing
       Collections and Services</a></cite>,
       v1.1, IVOA Proposed Recommendation,
       <code>http://www.ivoa.net/Documents/VODataService/20090903/</code>
       </dd>
</dl>



</body></html>
